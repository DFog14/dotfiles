# vim:syntax=sh:

if [ ! -d "$HOME/.vim_backup" ]; then
    mkdir $HOME/.vim_backup
fi

if [ ! -d "$HOME/.vim" ]; then
    mkdir $HOME/.vim
fi

ln -sfv "$DOTFILES_DIR/vim/vimrc" ~/.vimrc
ln -sfv "$DOTFILES_DIR/vim/gvimrc" ~/.gvimrc

ln -sfv "$DOTFILES_DIR/vim/autoload/" ~/.vim/
#ln -sfv "$DOTFILES_DIR/vim/plugin/" ~/.vim/
#ln -sfv "$DOTFILES_DIR/vim/doc/" ~/.vim/

# download & install plugins
vim -E +PlugInstall +qall

# build ycmd for YouCompleteMe if necessary
if [ ! -f $HOME/.vim/plugged/YouCompleteMe/third_party/ycmd/ycm_client_support.so ]
then
    $HOME/.vim/plugged/YouCompleteMe/install.sh
fi

if [ ! -f $HOME/.vim/plugged/YouCompleteMe/third_party/ycmd/ycm_core.so ]
then
    $HOME/.vim/plugged/YouCompleteMe/install.sh
fi
